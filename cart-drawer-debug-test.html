<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart Drawer Debug Test</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f5f5f5;
        }
        .test-section { 
            background: white; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .debug-info { 
            background: #f8f9fa; 
            padding: 15px; 
            border-radius: 4px; 
            margin: 10px 0;
            font-family: monospace;
        }
        button { 
            background: #007bff; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 4px; 
            cursor: pointer; 
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .console-log { 
            background: #000; 
            color: #00ff00; 
            padding: 10px; 
            border-radius: 4px; 
            font-family: monospace; 
            margin: 10px 0;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>ğŸ›’ Cart Drawer Debug Test</h1>
    
    <div class="test-section">
        <h2>ğŸ” Debug Information</h2>
        <div class="debug-info">
            <strong>Purpose:</strong> Test if cart drawer JavaScript loads and console logging works
        </div>
        
        <h3>Expected Console Output:</h3>
        <div class="console-log">ğŸš€ Cart drawer JavaScript loaded!
Available imports: { Component: [class], ThemeEvents: [object], ... }
ğŸ“ About to register cart-drawer custom element...
âœ… Registering cart-drawer custom element
ğŸ¯ Cart-drawer custom element registered successfully!
ğŸ”Œ Cart drawer connectedCallback called!
âœ… Cart drawer initialization complete!</div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ§ª Manual Tests</h2>
        <button onclick="testCartDrawerExists()">Test: Cart Drawer Exists</button>
        <button onclick="testCustomElementRegistered()">Test: Custom Element Registered</button>
        <button onclick="testAutoOpenSetting()">Test: Auto-Open Setting</button>
        <button onclick="testManualOpen()">Test: Manual Open</button>
        <button onclick="clearConsole()">Clear Console</button>
        
        <div id="test-results"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“‹ Cart Drawer Element</h2>
        <p>The cart drawer should appear below (invisible until opened):</p>
        
        <!-- Simplified cart drawer for testing -->
        <cart-drawer class="cart-drawer" data-auto-open="true">
            <dialog ref="dialog" id="cart-drawer-test">
                <div style="background: white; border: 2px solid #007bff; padding: 20px; border-radius: 8px;">
                    <h3>ğŸ›’ Test Cart Drawer</h3>
                    <p>This is a test cart drawer to verify the JavaScript functionality.</p>
                    <button onclick="document.getElementById('cart-drawer-test').close()">Close</button>
                </div>
            </dialog>
        </cart-drawer>
    </div>
    
    <div class="test-section">
        <h2>ğŸš¨ Troubleshooting</h2>
        <p><strong>If no console logs appear:</strong></p>
        <ul>
            <li>Open browser Developer Tools (F12)</li>
            <li>Go to Console tab</li>
            <li>Refresh the page</li>
            <li>Check for any JavaScript errors</li>
        </ul>
        
        <p><strong>Common Issues:</strong></p>
        <ul>
            <li>Import path errors (check Network tab for 404s)</li>
            <li>Browser console filter hiding logs</li>
            <li>JavaScript syntax errors preventing execution</li>
        </ul>
    </div>

    <script>
        // Basic test functions
        function testCartDrawerExists() {
            const drawer = document.querySelector('cart-drawer');
            const result = drawer ? 'âœ… Cart drawer element found' : 'âŒ Cart drawer element not found';
            console.log(result);
            updateResults(result);
        }
        
        function testCustomElementRegistered() {
            const registered = customElements.get('cart-drawer');
            const result = registered ? 'âœ… cart-drawer custom element registered' : 'âŒ cart-drawer custom element not registered';
            console.log(result);
            updateResults(result);
        }
        
        function testAutoOpenSetting() {
            const drawer = document.querySelector('cart-drawer');
            const setting = drawer?.getAttribute('data-auto-open');
            const result = `Auto-open setting: ${setting || 'not found'}`;
            console.log(result);
            updateResults(result);
        }
        
        function testManualOpen() {
            const drawer = document.querySelector('cart-drawer');
            if (drawer && drawer.showDialog) {
                drawer.showDialog();
                updateResults('âœ… Manual showDialog() called');
            } else {
                updateResults('âŒ showDialog method not available');
            }
        }
        
        function clearConsole() {
            console.clear();
            updateResults('Console cleared');
        }
        
        function updateResults(message) {
            const results = document.getElementById('test-results');
            results.innerHTML += `<div style="margin: 5px 0; padding: 8px; background: #f8f9fa; border-radius: 4px;">${message}</div>`;
        }
        
        // Log page load
        console.log('ğŸŒŸ Cart drawer test page loaded');
        console.log('ğŸ•’ Timestamp:', new Date().toISOString());
    </script>
    
    <!-- Load the cart drawer module -->
    <script type="module">
        console.log('ğŸ“¦ Loading cart drawer module...');
        try {
            // Simulate the asset loading
            const script = document.createElement('script');
            script.type = 'module';
            script.textContent = `
                console.log('ğŸ¯ Module script executing...');
                // This would normally import cart-drawer.js
                console.log('Note: In a real Shopify theme, this would load from {{ "cart-drawer.js" | asset_url }}');
            `;
            document.head.appendChild(script);
        } catch (error) {
            console.error('âŒ Error loading cart drawer module:', error);
        }
    </script>
</body>
</html>
