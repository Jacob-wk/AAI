{% comment %}
  Collection Card Snippet
  Renders a collection card with image, title, and product count
  
  @param {object} collection - The collection object to render
{% endcomment %}

{% comment %}
  Collection Card Snippet
  Renders a collection card with image, title, and product count
  
  @param {object} collection - The collection object to render
{% endcomment %}

<div class="collection-card">
  <a href="{{ collection.url }}" class="collection-card__link">
    <div class="collection-card__image-wrapper">
      {% if collection.featured_image != blank %}
        <img src="{{ collection.featured_image | image_url: width: 400 }}" 
             alt="{{ collection.featured_image.alt | default: collection.title | escape }}" 
             class="collection-card__image" 
             loading="lazy">
      {% else %}
        <div class="collection-card__placeholder">
          <svg width="60" height="60" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
        </div>
      {% endif %}
    </div>
    
    <div class="collection-card__content">
      <h3 class="collection-card__title">{{ collection.title }}</h3>
      {% if collection.description != blank %}
        <p class="collection-card__description">{{ collection.description | strip_html | truncate: 100 }}</p>
      {% endif %}
      <p class="collection-card__count">
        {{ collection.products_count }} 
        {% if collection.products_count == 1 %}product{% else %}products{% endif %}
      </p>
    </div>
  </a>
</div>

<style>
.collection-card {
  height: 100%;
  border: 1px solid #e0e0e0;
  border-radius: 12px;
  overflow: hidden;
  transition: all 0.3s ease;
  background: white;
}

.collection-card:hover {
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  transform: translateY(-4px);
}

.collection-card__link {
  display: block;
  text-decoration: none;
  color: inherit;
  height: 100%;
}

.collection-card__image-wrapper {
  position: relative;
  aspect-ratio: 16/10;
  overflow: hidden;
}

.collection-card__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.collection-card:hover .collection-card__image {
  transform: scale(1.05);
}

.collection-card__placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8f9fa;
  color: #6b7280;
}

.collection-card__content {
  padding: 1.5rem;
}

.collection-card__title {
  font-size: 1.25rem;
  font-weight: 600;
  margin: 0 0 0.75rem 0;
  color: #1e3a5f;
  line-height: 1.3;
}

.collection-card__description {
  color: #6b7280;
  font-size: 0.9rem;
  line-height: 1.5;
  margin: 0 0 0.75rem 0;
}

.collection-card__count {
  color: #9ca3af;
  font-size: 0.875rem;
  font-weight: 500;
  margin: 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

@media (max-width: 768px) {
  .collection-card__content {
    padding: 1rem;
  }
  
  .collection-card__title {
    font-size: 1.125rem;
  }
}
</style>
    pointer-events: auto;
  }

  .collection-card__content {
    position: relative;
    display: flex;
    height: 100%;
    width: 100%;
    max-width: 100%;
    gap: var(--collection-card-gap);
    flex-direction: column;
    align-items: var(--horizontal-alignment);
    justify-content: var(--vertical-alignment);
  }

  .collection-card__link {
    position: absolute;
    inset: 0;
    /* allows focus outline to have radius in supported browsers */
    border-radius: var(--border-radius);
  }

  /* Nested image block rules */

  .collection-card.collection-card--image-bg {
    aspect-ratio: var(--ratio);
  }

  .collection-card.collection-card--image-bg .collection-card__content {
    padding: var(--padding-lg);
  }

  /* Bento layout rules */
  .collection-card--image-height-fixed .collection-card__image {
    height: var(--fixed-card-height);
    width: 100%;
  }

  .collection-card--image-height-fixed.collection-card--image-bg {
    height: var(--fixed-card-height);
    aspect-ratio: unset;
  }

  .collection-card__image .image-block__image {
    object-fit: cover;
    width: 100%;
    height: 100%;
    max-width: 100%;
  }

  .collection-card--image-bg .collection-card__image {
    position: absolute;
    width: 100%;
    height: 100%;
  }

  .collection-card__image placeholder-image {
    width: 100%;
  }

  .collection-list:not(.hidden--desktop) .collection-card--flexible-aspect-ratio {
    &.collection-card.collection-card--image-bg,
    &.collection-card .placeholder-svg {
      aspect-ratio: 99;
    }

    .collection-card__image {
      aspect-ratio: 99;
      height: 100%;
    }

    .collection-card__inner {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .collection-card__content {
      flex-shrink: 0;
    }

    &:not(.collection-card--image-bg) .collection-card__content {
      height: auto;
    }
  }
{% endstylesheet %}

{% liquid
  assign collection = block.settings.collection

  assign onboarding = false
  if collection == blank
    assign onboarding = true
  endif
%}

<div
  class="
    collection-card
    border-style
    {% if block.settings.placement == 'on_image' %}collection-card--image-bg{% endif %}
    {% if section.settings.layout_type == 'bento' %}collection-card--image-height-fixed{% endif %}
    {% if section.settings.layout_type == 'editorial' %}collection-card--flexible-aspect-ratio{% endif %}
    {% if block.settings.inherit_color_scheme == false %} color-{{ block.settings.color_scheme }}{% endif %}
  "
  data-block-id="{{ block.id }}"
  style="
    {% render 'border-override', settings: block.settings %}
    --horizontal-alignment: {{ block.settings.horizontal_alignment }};
    --vertical-alignment: {{ block.settings.vertical_alignment }};
    --background-overlay-color: {{ block.settings.overlay_color }};
    --collection-card-gap: {{ block.settings.collection_card_gap }}px;
  "
  {{- block.shopify_attributes -}}
>
  {% if collection != blank or request.design_mode %}
    <a
      class="collection-card__link"
      {% unless onboarding %}
        href="{{ collection.url }}"
      {% endunless %}
    >
      <span class="visually-hidden">{{ collection.title }}</span>
    </a>
    <div class="collection-card__inner">
      {{ card_image }}
      <div class="collection-card__content layout-panel-flex--column">
        {{ children }}
      </div>
    </div>
  {% endif %}
</div>
