{%- comment -%}
  Simplified Course Access for Customer Account
  Uses Code Selling App + Intuto Multi Token approach
  Professional messaging for FEC operators
{%- endcomment -%}

{{ 'course-access-simple.css' | asset_url | stylesheet_tag }}

<div class="course-access-section">
  <div class="section-header">
    <h2>Your Professional Development Courses</h2>
    <p>Access your safety training and professional development courses</p>
  </div>
  
  {% assign has_courses = false %}
  {% for order in customer.orders %}
    {% for line_item in order.line_items %}
      {% if line_item.product.type == 'digital_course' or line_item.product.tags contains 'course' %}
        {% assign has_courses = true %}
        <div class="course-access-card">
          <div class="course-header">
            <h3>{{ line_item.title }}</h3>
            <div class="course-meta">
              <span class="course-date">Purchased: {{ order.created_at | date: "%B %d, %Y" }}</span>
              <span class="order-number">#{{ order.name }}</span>
            </div>
          </div>
          
          <div class="course-details">
            {% if line_item.product.metafields.course.ceu_credits %}
              <span class="course-badge ceu-credits">{{ line_item.product.metafields.course.ceu_credits }} CEU Credits</span>
            {% endif %}
            {% if line_item.product.metafields.course.duration %}
              <span class="course-badge duration">{{ line_item.product.metafields.course.duration }}</span>
            {% endif %}
            {% if line_item.product.metafields.course.certificate %}
              <span class="course-badge certificate">Professional Certificate</span>
            {% endif %}
          </div>
          
          <div class="access-instructions">
            <div class="access-method">
              <h4>ðŸ“§ Course Access</h4>
              <p>Your secure course link was sent to: <strong>{{ customer.email }}</strong></p>
              <p>Click the link in your email to access your professional training in our learning platform.</p>
            </div>
            
            <div class="course-features">
              <h5>What You'll Get:</h5>
              <ul>
                <li>Interactive safety training modules</li>
                <li>Real-world FEC scenarios and case studies</li>
                <li>Professional certificate upon completion</li>
                <li>Mobile-friendly learning platform</li>
                <li>Lifetime access to course materials</li>
              </ul>
            </div>
            
            <div class="support-actions">
              <a href="mailto:support@aai-institute.com?subject=Resend Course Access - Order {{ order.name }}" class="btn btn-secondary btn-small">
                ðŸ“¬ Resend Access Email
              </a>
              <a href="/pages/course-support" class="btn btn-outline btn-small">
                ðŸ’¬ Get Help
              </a>
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  {% endfor %}
  
  {% unless has_courses %}
    <div class="no-courses">
      <div class="no-courses-content">
        <h3>ðŸŽ¯ Start Your Professional Development</h3>
        <p>You haven't enrolled in any courses yet. Explore our professional safety training designed specifically for trampoline parks and family entertainment centres.</p>
        
        <div class="course-benefits">
          <h4>Why AAI Professional Training?</h4>
          <ul>
            <li>âœ… Industry-recognized safety education</li>
            <li>âœ… Insurance-approved training programs</li>
            <li>âœ… ASTM F24 compliance training</li>
            <li>âœ… Proven by 500+ family entertainment centres</li>
            <li>âœ… 98% course completion rate</li>
          </ul>
        </div>
        
        <a href="/collections/professional-courses" class="btn btn-primary">
          ðŸš€ Browse Professional Courses
        </a>
      </div>
    </div>
  {% endunless %}
  
  <div class="professional-support">
    <h4>Professional Support</h4>
    <div class="support-grid">
      <div class="support-item">
        <strong>Technical Support</strong>
        <a href="mailto:support@aai-institute.com">support@aai-institute.com</a>
        <small>Course access and platform issues</small>
      </div>
      <div class="support-item">
        <strong>Training Questions</strong>
        <a href="mailto:training@aai-institute.com">training@aai-institute.com</a>
        <small>Course content and certification</small>
      </div>
      <div class="support-item">
        <strong>Corporate Training</strong>
        <a href="mailto:corporate@aai-institute.com">corporate@aai-institute.com</a>
        <small>Enterprise solutions and bulk training</small>
      </div>
    </div>
  </div>
</div>
