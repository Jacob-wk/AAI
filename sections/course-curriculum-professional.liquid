<!-- COPILOT CONTEXT: Course curriculum section for AAI LMS
  This section displays course curriculum with modules, lessons, and learning objectives
  Supports professional safety education standards (IAAPA, ASTM F24, NAARSO)
  Includes CEU credit tracking and progress indicators
  Design system: Authority Navy (#1e3a5f), Safety Orange (#ff6b35), Electric Blue (#3498db)
-->

{%- liquid
  assign course_curriculum = product.metafields.custom.course_curriculum
  assign course_modules = product.metafields.custom.course_modules
  assign total_lessons = 0
  assign total_duration = 0
  
  if course_modules
    for module in course_modules.value
      assign total_lessons = total_lessons | plus: module.lessons.size
      for lesson in module.lessons
        assign total_duration = total_duration | plus: lesson.duration
      endfor
    endfor
  endif
-%}

<div class="course-curriculum-professional color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width section-{{ section.id }}-padding">
    <div class="course-curriculum__container">
      
      {%- if section.settings.heading != blank -%}
        <div class="course-curriculum__header">
          <h2 class="course-curriculum__heading h1">
            {{ section.settings.heading }}
          </h2>
          {%- if section.settings.description != blank -%}
            <div class="course-curriculum__description rte">
              {{ section.settings.description }}
            </div>
          {%- endif -%}
          
          <div class="course-curriculum__stats">
            <div class="curriculum-stat">
              <div class="curriculum-stat__number">{{ course_modules.value.size | default: 0 }}</div>
              <div class="curriculum-stat__label">Modules</div>
            </div>
            <div class="curriculum-stat">
              <div class="curriculum-stat__number">{{ total_lessons }}</div>
              <div class="curriculum-stat__label">Lessons</div>
            </div>
            <div class="curriculum-stat">
              <div class="curriculum-stat__number">{{ total_duration }}min</div>
              <div class="curriculum-stat__label">Total Duration</div>
            </div>
          </div>
        </div>
      {%- endif -%}

      {%- if course_modules -%}
        <div class="course-curriculum__content">
          {%- for module in course_modules.value -%}
            <div class="curriculum-module" data-module-id="{{ forloop.index }}">
              <div class="curriculum-module__header">
                <h3 class="curriculum-module__title h3">
                  <span class="module-number">Module {{ forloop.index }}</span>
                  {{ module.title }}
                </h3>
                
                {%- if module.description -%}
                  <div class="curriculum-module__description">
                    {{ module.description }}
                  </div>
                {%- endif -%}
                
                <div class="curriculum-module__meta">
                  {%- if module.duration -%}
                    <span class="module-duration">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                      </svg>
                      {{ module.duration }} minutes
                    </span>
                  {%- endif -%}
                  
                  {%- if module.ceu_credits -%}
                    <span class="module-ceu">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                      </svg>
                      {{ module.ceu_credits }} CEU Credits
                    </span>
                  {%- endif -%}
                </div>
              </div>

              {%- if module.lessons -%}
                <div class="curriculum-module__lessons">
                  {%- for lesson in module.lessons -%}
                    <div class="curriculum-lesson" data-lesson-id="{{ forloop.index }}">
                      <div class="lesson-icon">
                        {%- case lesson.type -%}
                          {%- when 'video' -%}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                              <path d="M8 5v14l11-7z"/>
                            </svg>
                          {%- when 'quiz' -%}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                          {%- when 'document' -%}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                              <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                          {%- else -%}
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                            </svg>
                        {%- endcase -%}
                      </div>
                      
                      <div class="lesson-content">
                        <h4 class="lesson-title">{{ lesson.title }}</h4>
                        {%- if lesson.description -%}
                          <p class="lesson-description">{{ lesson.description }}</p>
                        {%- endif -%}
                        
                        <div class="lesson-meta">
                          <span class="lesson-type">{{ lesson.type | capitalize }}</span>
                          {%- if lesson.duration -%}
                            <span class="lesson-duration">{{ lesson.duration }}min</span>
                          {%- endif -%}
                          {%- if lesson.preview -%}
                            <span class="lesson-preview">Preview Available</span>
                          {%- endif -%}
                        </div>
                      </div>
                      
                      <div class="lesson-actions">
                        {%- if lesson.preview -%}
                          <button class="lesson-preview-btn btn btn--secondary btn--small">Preview</button>
                        {%- endif -%}
                      </div>
                    </div>
                  {%- endfor -%}
                </div>
              {%- endif -%}
              
              {%- if module.learning_objectives -%}
                <details class="curriculum-module__objectives">
                  <summary class="objectives-toggle">Learning Objectives</summary>
                  <ul class="objectives-list">
                    {%- for objective in module.learning_objectives -%}
                      <li class="objective-item">{{ objective }}</li>
                    {%- endfor -%}
                  </ul>
                </details>
              {%- endif -%}
            </div>
          {%- endfor -%}
        </div>
      {%- endif -%}

      {%- if section.settings.show_certification_info -%}
        <div class="course-curriculum__certification">
          <div class="certification-card">
            <div class="certification-icon">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
            </div>
            <div class="certification-content">
              <h3 class="certification-title">Professional Certification</h3>
              <p class="certification-description">
                Complete all modules to earn your professional safety certification 
                and {{ product.metafields.custom.ceu_credits | default: '0' }} CEU credits.
              </p>
              <ul class="certification-benefits">
                <li>Industry-recognized credential</li>
                <li>Digital certificate download</li>
                <li>LinkedIn verification</li>
                <li>Continuing education credits</li>
              </ul>
            </div>
          </div>
        </div>
      {%- endif -%}
    </div>
  </div>
</div>

<style>
  .course-curriculum-professional {
    padding: 60px 0;
  }

  .course-curriculum__header {
    text-align: center;
    margin-bottom: 50px;
  }

  .course-curriculum__heading {
    color: var(--aai-navy);
    margin-bottom: 20px;
  }

  .course-curriculum__description {
    max-width: 600px;
    margin: 0 auto 30px;
    color: var(--color-foreground-75);
  }

  .course-curriculum__stats {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-top: 30px;
  }

  .curriculum-stat {
    text-align: center;
  }

  .curriculum-stat__number {
    font-size: 2.4rem;
    font-weight: 700;
    color: var(--aai-orange);
    line-height: 1;
  }

  .curriculum-stat__label {
    font-size: 1.4rem;
    color: var(--color-foreground-75);
    margin-top: 8px;
  }

  .course-curriculum__content {
    max-width: 800px;
    margin: 0 auto;
  }

  .curriculum-module {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(30, 58, 95, 0.1);
    margin-bottom: 30px;
    overflow: hidden;
    border: 1px solid rgba(30, 58, 95, 0.1);
  }

  .curriculum-module__header {
    padding: 30px;
    background: linear-gradient(135deg, var(--aai-navy) 0%, #2c4a6b 100%);
    color: white;
  }

  .curriculum-module__title {
    margin: 0 0 15px 0;
  }

  .module-number {
    display: block;
    font-size: 1.2rem;
    font-weight: 500;
    opacity: 0.8;
    margin-bottom: 5px;
  }

  .curriculum-module__description {
    font-size: 1.4rem;
    opacity: 0.9;
    margin-bottom: 20px;
    line-height: 1.5;
  }

  .curriculum-module__meta {
    display: flex;
    gap: 20px;
    font-size: 1.2rem;
  }

  .curriculum-module__meta span {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .curriculum-module__lessons {
    padding: 0;
  }

  .curriculum-lesson {
    display: flex;
    align-items: center;
    padding: 20px 30px;
    border-bottom: 1px solid rgba(30, 58, 95, 0.1);
    transition: background-color 0.2s ease;
  }

  .curriculum-lesson:hover {
    background-color: rgba(52, 152, 219, 0.05);
  }

  .curriculum-lesson:last-child {
    border-bottom: none;
  }

  .lesson-icon {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    background: rgba(52, 152, 219, 0.1);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--aai-blue);
    margin-right: 20px;
  }

  .lesson-content {
    flex: 1;
  }

  .lesson-title {
    font-size: 1.6rem;
    font-weight: 600;
    color: var(--aai-navy);
    margin: 0 0 8px 0;
  }

  .lesson-description {
    font-size: 1.4rem;
    color: var(--color-foreground-75);
    margin: 0 0 10px 0;
    line-height: 1.4;
  }

  .lesson-meta {
    display: flex;
    gap: 15px;
    font-size: 1.2rem;
    color: var(--color-foreground-75);
  }

  .lesson-type {
    background: rgba(52, 152, 219, 0.1);
    color: var(--aai-blue);
    padding: 2px 8px;
    border-radius: 4px;
    font-weight: 500;
  }

  .lesson-preview {
    color: var(--aai-orange);
    font-weight: 500;
  }

  .lesson-actions {
    flex-shrink: 0;
  }

  .lesson-preview-btn {
    font-size: 1.2rem;
    padding: 8px 16px;
  }

  .curriculum-module__objectives {
    border-top: 1px solid rgba(30, 58, 95, 0.1);
  }

  .objectives-toggle {
    padding: 20px 30px;
    font-weight: 600;
    color: var(--aai-navy);
    cursor: pointer;
    background: rgba(52, 152, 219, 0.05);
  }

  .objectives-list {
    padding: 20px 30px 30px;
    margin: 0;
    list-style: none;
  }

  .objective-item {
    position: relative;
    padding-left: 25px;
    margin-bottom: 10px;
    color: var(--color-foreground-75);
    line-height: 1.5;
  }

  .objective-item::before {
    content: '✓';
    position: absolute;
    left: 0;
    color: var(--aai-orange);
    font-weight: bold;
  }

  .course-curriculum__certification {
    margin-top: 50px;
  }

  .certification-card {
    background: linear-gradient(135deg, var(--aai-orange) 0%, #ff8c66 100%);
    color: white;
    padding: 40px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    gap: 30px;
  }

  .certification-icon {
    flex-shrink: 0;
    opacity: 0.9;
  }

  .certification-title {
    font-size: 2.4rem;
    font-weight: 700;
    margin: 0 0 15px 0;
  }

  .certification-description {
    font-size: 1.6rem;
    margin: 0 0 20px 0;
    opacity: 0.9;
    line-height: 1.5;
  }

  .certification-benefits {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .certification-benefits li {
    position: relative;
    padding-left: 20px;
    font-size: 1.4rem;
  }

  .certification-benefits li::before {
    content: '✓';
    position: absolute;
    left: 0;
    font-weight: bold;
  }

  @media screen and (max-width: 768px) {
    .course-curriculum__stats {
      gap: 20px;
    }

    .curriculum-stat__number {
      font-size: 2rem;
    }

    .curriculum-module__header {
      padding: 20px;
    }

    .curriculum-lesson {
      padding: 15px 20px;
    }

    .lesson-icon {
      width: 32px;
      height: 32px;
      margin-right: 15px;
    }

    .certification-card {
      flex-direction: column;
      text-align: center;
      padding: 30px 20px;
      gap: 20px;
    }

    .certification-benefits {
      grid-template-columns: 1fr;
    }
  }
</style>

{% schema %}
{
  "name": "Course Curriculum Professional",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "default": "Course Curriculum",
      "label": "Heading"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description"
    },
    {
      "type": "checkbox",
      "id": "show_certification_info",
      "default": true,
      "label": "Show certification information"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "Course Curriculum Professional"
    }
  ]
}
{% endschema %}
