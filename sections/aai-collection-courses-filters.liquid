{% comment %}
  Filters section for the Courses Collection page.
  Allows searching and filtering by level, category, CEU.
{% endcomment %}

<div class="catalog-filters">
  <div class="aai-container">
    <div class="filter-header">
      <h2>{{ section.settings.title }}</h2>
      <div class="filter-controls">
        <div class="search-box">
          <input type="text" 
                 id="course-search" 
                 placeholder="{{ section.settings.search_placeholder }}"
                 class="search-input">
          <button class="search-btn" aria-label="Search">
            {% render 'icon-search' %}
          </button>
        </div>
        
        {% if section.settings.show_level_filter %}
        <div class="filter-dropdown">
          <label for="level-filter" class="visually-hidden">Filter by Level</label>
          <select id="level-filter" class="filter-select">
            <option value="">All Levels</option>
            {% for block in section.blocks %}
              {% if block.type == 'level_option' %}
                <option value="{{ block.settings.level_value }}">{{ block.settings.level_label }}</option>
              {% endif %}
            {% endfor %}
          </select>
        </div>
        {% endif %}
        
        {% if section.settings.show_category_filter %}
        <div class="filter-dropdown">
          <label for="category-filter" class="visually-hidden">Filter by Category</label>
          <select id="category-filter" class="filter-select">
            <option value="">All Categories</option>
            {% for block in section.blocks %}
              {% if block.type == 'category_option' %}
                <option value="{{ block.settings.category_value }}">{{ block.settings.category_label }}</option>
              {% endif %}
            {% endfor %}
          </select>
        </div>
        {% endif %}

        {% if section.settings.show_ceu_filter %}
        <div class="filter-dropdown">
          <label for="ceu-filter" class="visually-hidden">Filter by CEU Credits</label>
          <select id="ceu-filter" class="filter-select">
            <option value="">All CEU Credits</option>
            {% for block in section.blocks %}
              {% if block.type == 'ceu_option' %}
                <option value="{{ block.settings.ceu_value }}">{{ block.settings.ceu_label }}</option>
              {% endif %}
            {% endfor %}
          </select>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Collection Courses Filters",
  "tag": "section",
  "class": "collection-courses-filters",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Find Your Course"
    },
    {
      "type": "text",
      "id": "search_placeholder",
      "label": "Search Input Placeholder",
      "default": "Search courses..."
    },
    {
      "type": "checkbox",
      "id": "show_level_filter",
      "label": "Show Level Filter",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_category_filter",
      "label": "Show Category Filter",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_ceu_filter",
      "label": "Show CEU Filter",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "level_option",
      "name": "Level Filter Option",
      "settings": [
        {
          "type": "text",
          "id": "level_value",
          "label": "Level Value (e.g., beginner)"
        },
        {
          "type": "text",
          "id": "level_label",
          "label": "Level Label (e.g., Beginner)"
        }
      ]
    },
    {
      "type": "category_option",
      "name": "Category Filter Option",
      "settings": [
        {
          "type": "text",
          "id": "category_value",
          "label": "Category Value (e.g., safety)"
        },
        {
          "type": "text",
          "id": "category_label",
          "label": "Category Label (e.g., Safety Management)"
        }
      ]
    },
    {
      "type": "ceu_option",
      "name": "CEU Filter Option",
      "settings": [
        {
          "type": "text",
          "id": "ceu_value",
          "label": "CEU Value (e.g., 1-2)"
        },
        {
          "type": "text",
          "id": "ceu_label",
          "label": "CEU Label (e.g., 1-2 Credits)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Collection Courses Filters",
      "settings": {
        "title": "Find Your Course",
        "search_placeholder": "Search courses..."
      },
      "blocks": [
        {
          "type": "level_option",
          "settings": { "level_value": "beginner", "level_label": "Beginner" }
        },
        {
          "type": "level_option",
          "settings": { "level_value": "intermediate", "level_label": "Intermediate" }
        },
        {
          "type": "level_option",
          "settings": { "level_value": "advanced", "level_label": "Advanced" }
        },
        {
          "type": "category_option",
          "settings": { "category_value": "safety", "category_label": "Safety Management" }
        },
        {
          "type": "category_option",
          "settings": { "category_value": "operations", "category_label": "Operations" }
        },
        {
          "type": "category_option",
          "settings": { "category_value": "maintenance", "category_label": "Maintenance" }
        },
        {
          "type": "category_option",
          "settings": { "category_value": "leadership", "category_label": "Leadership" }
        },
        {
          "type": "ceu_option",
          "settings": { "ceu_value": "1-2", "ceu_label": "1-2 Credits" }
        },
        {
          "type": "ceu_option",
          "settings": { "ceu_value": "3-5", "ceu_label": "3-5 Credits" }
        },
        {
          "type": "ceu_option",
          "settings": { "ceu_value": "6+", "ceu_label": "6+ Credits" }
        }
      ]
    }
  ]
}
{% endschema %}
