<div class="filter-category">
  <div class="filter-header">
    <h4 class="filter-title">{{ block.settings.filter_title | default: 'Category' }}</h4>
    {% if block.settings.collapsible %}
      <button type="button" class="filter-toggle" aria-expanded="true">
        <svg class="filter-chevron" width="16" height="16" viewBox="0 0 16 16">
          <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" fill="none"/>
        </svg>
      </button>
    {% endif %}
  </div>
  
  <div class="filter-content" {% if block.settings.collapsible %}data-collapsible{% endif %}>
    {% assign categories = block.settings.categories | split: ',' %}
    {% for category in categories %}
      {% assign category_trimmed = category | strip %}
      {% if category_trimmed != blank %}
        <label class="filter-option">
          <input type="checkbox" name="category" value="{{ category_trimmed | handle }}" class="filter-checkbox">
          <span class="filter-label">{{ category_trimmed }}</span>
        </label>
      {% endif %}
    {% endfor %}
    
    {% if block.settings.show_all_option %}
      <label class="filter-option filter-all">
        <input type="checkbox" name="category" value="all" class="filter-checkbox">
        <span class="filter-label">{{ block.settings.all_text | default: 'All Categories' }}</span>
      </label>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Category Filter",
  "settings": [
    {
      "type": "text",
      "id": "filter_title",
      "label": "Filter Title",
      "default": "Category"
    },
    {
      "type": "textarea",
      "id": "categories",
      "label": "Categories",
      "info": "Enter categories separated by commas",
      "default": "Business Analytics, Data Science, Project Management, Software Development, Cybersecurity"
    },
    {
      "type": "checkbox",
      "id": "show_all_option",
      "label": "Show 'All Categories' option",
      "default": true
    },
    {
      "type": "text",
      "id": "all_text",
      "label": "'All' Option Text",
      "default": "All Categories"
    },
    {
      "type": "checkbox",
      "id": "collapsible",
      "label": "Make filter collapsible",
      "default": false
    }
  ]
}
{% endschema %}
