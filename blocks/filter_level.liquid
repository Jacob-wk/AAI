<div class="filter-level">
  <div class="filter-header">
    <h4 class="filter-title">{{ block.settings.filter_title | default: 'Level' }}</h4>
    {% if block.settings.collapsible %}
      <button type="button" class="filter-toggle" aria-expanded="true">
        <svg class="filter-chevron" width="16" height="16" viewBox="0 0 16 16">
          <path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" fill="none"/>
        </svg>
      </button>
    {% endif %}
  </div>
  
  <div class="filter-content" {% if block.settings.collapsible %}data-collapsible{% endif %}>
    {% assign levels = block.settings.levels | split: ',' %}
    {% for level in levels %}
      {% assign level_trimmed = level | strip %}
      {% if level_trimmed != blank %}
        <label class="filter-option">
          <input type="checkbox" name="level" value="{{ level_trimmed | handle }}" class="filter-checkbox">
          <span class="filter-label">{{ level_trimmed }}</span>
        </label>
      {% endif %}
    {% endfor %}
    
    {% if block.settings.show_all_option %}
      <label class="filter-option filter-all">
        <input type="checkbox" name="level" value="all" class="filter-checkbox">
        <span class="filter-label">{{ block.settings.all_text | default: 'All Levels' }}</span>
      </label>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Level Filter",
  "settings": [
    {
      "type": "text",
      "id": "filter_title",
      "label": "Filter Title",
      "default": "Level"
    },
    {
      "type": "textarea",
      "id": "levels",
      "label": "Skill Levels",
      "info": "Enter levels separated by commas",
      "default": "Beginner, Intermediate, Advanced, Expert"
    },
    {
      "type": "checkbox",
      "id": "show_all_option",
      "label": "Show 'All Levels' option",
      "default": true
    },
    {
      "type": "text",
      "id": "all_text",
      "label": "'All' Option Text",
      "default": "All Levels"
    },
    {
      "type": "checkbox",
      "id": "collapsible",
      "label": "Make filter collapsible",
      "default": false
    }
  ]
}
{% endschema %}
